import{O as f,Q as h,c as d,V as T,Y as M,Z as I,j as t,G as g,$ as k,B as j,a0 as x,W as P,o as Y,a1 as w}from"./index-BaHD66kx.js";import{A as E}from"./AutoComplete-YiA7Ck6w.js";import{u as G}from"./formik.esm-KIhpJ1AK.js";import{T as N}from"./TextField-CwAoBwYD.js";import{B as C}from"./InputLabel-BZw1JY1B.js";import{A as R,D as V,h as O,G as W}from"./GetToAction-KPhA80I9.js";import"./IconButton-NUepV84n.js";import"./Skeleton-DmPhDa6e.js";import"./Checkbox-BYXElSFK.js";const S=m=>{var s;const{dialogProps:c,statedata:n,type:p}=m,{countries:r,loading:i,error:u}=f(e=>e.location),l=h();d.useEffect(()=>{l(T({page:1,page_size:100}))},[]);const o=G({initialValues:{country:((s=n==null?void 0:n.countryId)==null?void 0:s._id)||"",state:(n==null?void 0:n.name)||""},onSubmit:e=>{l(p==="edit"?M({state:e.state,countryId:e.country,stateId:n._id}):I({state:e.state,countryId:e.country})),c==null||c.onClose(),l(getAllStateAsync({page:1,page_size:10}))}});return t.jsx("div",{children:t.jsxs("form",{onSubmit:o.handleSubmit,children:[t.jsxs(g,{container:!0,spacing:2,children:[t.jsx(g,{item:!0,xs:12,children:t.jsx(k,{fullWidth:!0,children:t.jsx(E,{options:(r==null?void 0:r.countries)||[],label:"Select Country",id:"country-select",name:"country",value:o.values.country,onChange:e=>o.setFieldValue("country",e),error:o.touched.country&&!!o.errors.country,helperText:o.touched.country&&o.errors.country,required:!0,color:"secondary",optionKey:"_id",optionLabel:"name"})})}),t.jsx(g,{item:!0,xs:12,children:t.jsx(N,{autoFocus:!0,margin:"dense",id:"name",label:"State Name",type:"text",fullWidth:!0,color:"secondary",variant:"outlined",value:o.values.state,onChange:e=>o.setFieldValue("state",e.target.value),required:!0})})]}),t.jsx(j,{sx:{display:"flex",justifyContent:"flex-end",marginTop:2},children:t.jsx(C,{type:"submit",variant:"outlined",color:"secondary",size:"medium",children:"Submit"})})]})})},ee=m=>{var y;const[c,n]=d.useState(""),[p,r]=d.useState(null),[i,u]=d.useState({open:!1,onClose:()=>u({...i,open:!1})}),[l,o]=d.useState({page:0,pageSize:10}),s=h(),{states:e,loading:A,error:$}=f(a=>a.location);d.useEffect(()=>{s(x({page:1,page_size:10}))},[s]);const z=()=>{n("Add State"),r(t.jsx(S,{dialogProps:i})),u({...i,open:!0})},_=a=>{const B=e==null?void 0:e.states.find(F=>F._id===a);n("Update Country"),r(t.jsx(S,{dialogProps:i,statedata:B,type:"edit"})),u({...i,open:!0})},b=a=>{s(w({state_id:a})),s(x({page:1,page_size:10}))},D=[{field:"name",headerName:"State name",flex:2},{field:"createdAt",headerName:"Added Date",flex:2,renderCell:a=>O(a.value).format("DD/MM/YYYY")},{field:"_id",headerName:"Action",flex:2,renderCell:a=>W(a.value,_,b)}],v=a=>{a.pageSize==l.pageSize?(s(getCountryBySuperAdminAsync({page:a.page+1,page_size:a.pageSize})),o(a)):(s(getCountryBySuperAdminAsync({page:a.page,page_size:a.pageSize})),o({page:1,pageSize:a.pageSize}))};return t.jsxs(t.Fragment,{children:[t.jsx(R,{title:c,content:p,dialogProps:i}),t.jsx(j,{sx:{display:"flex",justifyContent:"flex-end",marginBottom:2},children:t.jsx(C,{sx:{borderRadius:2},variant:"outlined",color:"secondary",size:"large",onClick:z,startIcon:t.jsx(P,{size:14}),children:"State"})}),t.jsx(Y,{children:t.jsx(V,{data:e==null?void 0:e.states,columns:D,getRowId:a=>a._id,loading:A,initialState:{pagination:{paginationModel:{pageSize:10}}},rowCount:(y=e==null?void 0:e.states)==null?void 0:y.length,paginationMode:"server",onPaginationModelChange:v,pageSizeOptions:[10],disableRowSelectionOnClick:!0})})]})};export{ee as default};
