import{a as z,y as w,z as p,A as F,j as t,G as S,B as x,r as l,u as M,S as v,F as E,P as G,C as N}from"./index-nP3sWgOM.js";import{u as Y}from"./formik.esm-Dyqt8FN9.js";import{c as I,a as q}from"./index.esm-B2q6Cw9c.js";import{T as O}from"./TextField-Btu36Zmo.js";import{B as y}from"./Button-DYMAArme.js";import{G as $}from"./GetToAction-p5I7uB52.js";import{A as H}from"./Dialog-D7RuuEns.js";import{l as U}from"./lodash-CeyOGm4C.js";import{h as V}from"./moment-G82_0lEo.js";import{D as W}from"./DataTable-BAyMAVN6.js";import"./InputLabel-DaDe49tm.js";import"./MenuItem-vSBr2iRT.js";import"./index-CcBqUUtn.js";import"./DialogContent-CAWl_w7U.js";import"./Autocomplete-Cb93hnIo.js";import"./Close-CYbAYMXT.js";import"./Checkbox-CVXqhyuK.js";import"./Skeleton-DY2pMhD5.js";import"./colorManipulator-BTVsESXO.js";import"./useThemeProps-Cp5GSgP0.js";const j=({dialogProps:g,catdata:a,type:u})=>{const s=z(),o=Y({initialValues:{name:(a==null?void 0:a.name)||""},validationSchema:I({name:q().required("name is required")}),onSubmit:n=>{u==="edit"?s(w({id:a==null?void 0:a._id,name:n==null?void 0:n.name})).then(()=>{s(p({page:1,page_size:10}))}):s(F({name:n==null?void 0:n.name})).then(()=>{s(p({page:1,page_size:10}))}),g.onClose()}});return t.jsx("div",{children:t.jsxs("form",{onSubmit:o.handleSubmit,children:[t.jsx(S,{container:!0,spacing:2,children:t.jsx(S,{item:!0,xs:12,children:t.jsx(O,{fullWidth:!0,id:"name",name:"name",label:"Category Name",color:"secondary",value:o.values.name,onChange:o.handleChange,error:o.touched.name&&!!o.errors.name,helperText:o.touched.name&&o.errors.name})})}),t.jsx(x,{sx:{display:"flex",justifyContent:"flex-end",marginTop:2},children:t.jsx(y,{type:"submit",variant:"outlined",color:"secondary",size:"medium",children:"Submit"})})]})})},he=()=>{var C;const[g,a]=l.useState(""),[u,s]=l.useState(null),[o,n]=l.useState(""),r=z(),{roomCategories:i,loading:b,error:J}=M(e=>e.hotel),[m,h]=l.useState({open:!1,onClose:()=>h({...m,open:!1})}),[d,f]=l.useState({page:0,pageSize:10});l.useEffect(()=>{r(p({page:1,page_size:10}))},[r]);const A=()=>{a("Add RoomCategory"),s(t.jsx(j,{dialogProps:m})),h({...m,open:!0})},R=e=>{const c=i==null?void 0:i.categories.find(B=>B._id===e);a("Update RoomCategory"),s(t.jsx(j,{dialogProps:m,catdata:c,type:"edit"})),h({...m,open:!0})},_=e=>{r(N({id:e})).then(()=>{r(p({page:1,page_size:10}))})},D=[{field:"name",headerName:"Categorie ",flex:2},{field:"createdAt",headerName:"Added Date",flex:2,renderCell:e=>V(e.value).format("DD/MM/YYYY")},{field:"_id",headerName:"Action",flex:2,renderCell:e=>$(e.value,R,_)}],T=e=>{e.pageSize==d.pageSize?(r(p({page:e.page+1,page_size:e.pageSize})),f(e)):(r(p({page:e.page,page_size:e.pageSize})),f({page:1,pageSize:e.pageSize}))},P=l.useCallback(U.debounce(e=>{r(p({page:d.page+1,page_size:d==null?void 0:d.pageSize,search:e}))},1e3),[]),k=e=>{const c=e.target.value;n(c),P(c)};return t.jsxs("div",{children:[t.jsx(H,{title:g,content:u,dialogProps:m}),t.jsxs(x,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:2},children:[t.jsx(x,{children:t.jsx(v,{value:o,handleSearchChange:k})}),t.jsx(y,{sx:{borderRadius:2},variant:"outlined",color:"secondary",size:"large",onClick:A,startIcon:t.jsx(E,{size:14}),children:"RoomCategory"})]}),t.jsx(G,{children:t.jsx(W,{data:i==null?void 0:i.categories,columns:D,getRowId:e=>e._id,loading:b,initialState:{pagination:{paginationModel:{pageSize:10}}},rowCount:(C=i==null?void 0:i.categories)==null?void 0:C.length,paginationMode:"server",onPaginationModelChange:T,pageSizeOptions:[10],disableRowSelectionOnClick:!0})})]})};export{he as default};
