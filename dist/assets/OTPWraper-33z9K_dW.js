import{s as X,g as F,j as n,B as O,u as Y,Q as Z,bw as _,O as ee,bB as te,$,am as ne,by as re,aD as ae,G as f,bz as se,bA as ie,aS as le,T as H}from"./index-BAq3bRqY.js";import{A as oe,a as ce}from"./AuthCardWrapper-DWzwwi1_.js";import{c as ue,a as N}from"./index.esm-Bt5w9dkV.js";import{F as de}from"./formik.esm-DtCjOOhE.js";import{T as me}from"./TextField-Cduosa0A.js";import{I as pe,F as C,B as he}from"./InputLabel-D1eMKdds.js";const fe=X(me)`
  input {
    text-align: center;
  }
`,xe={TextFieldStyled:fe},ge=a=>n.jsx(xe.TextFieldStyled,{...a}),B={left:"ArrowLeft",right:"ArrowRight",backspace:"Backspace",home:"Home",end:"End"};function je(a,i){return a<=0?[]:Array.from({length:a},i)}function ye(a,i,h){return a.map((u,b)=>i===b?h:u)}function L(a){return a.join("")}function q(a,i){return[...a,i]}function ve(a,i,h){return a.reduce((u,b,r)=>{const{characters:m,restArrayMerged:o}=u;if(r<h)return{restArrayMerged:o,characters:q(m,b)};const[x,...D]=o;return{restArrayMerged:D,characters:q(m,x||"")}},{restArrayMerged:i,characters:[]}).characters}function be(a){return a.split("")}function z(a){const i=F.useRef(()=>{throw new Error("Cannot call an event handler while rendering.")});return F.useInsertionEffect(()=>{i.current=a}),F.useCallback((...h)=>{var u;return(u=i.current)==null?void 0:u.call(i,...h)},[])}const we=()=>!0,Fe=F.forwardRef((a,i)=>{const{value:h="",length:u=4,autoFocus:b=!1,onChange:r,TextFieldsProps:m,onComplete:o,validateChar:x=we,className:D,onBlur:w,...I}=a,k=F.useRef(h),E=z(o),A=z(e=>{const t=e.slice(0,u);return{isCompleted:t.length===u,finalValue:t}});F.useEffect(()=>{const{isCompleted:e,finalValue:t}=A(k.current);e&&E(t)},[u,E,A]);const j=je(u,(e,t)=>({character:h[t]||"",inputRef:F.createRef()})),M=e=>j.findIndex(({inputRef:t})=>t.current===e),S=()=>j.map(({character:e})=>e),P=(e,t)=>{const s=ye(S(),e,t);return L(s)},G=e=>{var t,s;(s=(t=j[e])==null?void 0:t.inputRef.current)==null||s.focus()},p=e=>{var t,s;(s=(t=j[e])==null?void 0:t.inputRef.current)==null||s.select()},V=e=>{e+1!==u&&(j[e+1].character?p(e+1):G(e+1))},W=(e,t)=>typeof x!="function"?!0:x(e,t),K=e=>{const t=M(e.target);if(t===0&&e.target.value.length>1){const{finalValue:v,isCompleted:T}=A(e.target.value);r==null||r(v),T&&(o==null||o(v)),p(v.length-1);return}const s=e.target.value[0]||"";let d=s;d&&!W(d,t)&&(d="");const l=P(t,d);r==null||r(l);const{isCompleted:y,finalValue:g}=A(l);y&&(o==null||o(g)),d!==""?l.length-1<t?p(l.length):V(t):s===""&&l.length<=t&&p(t-1)},Q=e=>{const t=e.target,s=t.selectionStart,d=t.selectionEnd,l=M(t),y=s===0&&d===0;if(t.value===e.key)e.preventDefault(),V(l);else if(B.backspace===e.key){if(!t.value)e.preventDefault(),p(l-1);else if(y){e.preventDefault();const g=P(l,"");r==null||r(g),g.length<=l&&p(l-1)}}else B.left===e.key?(e.preventDefault(),p(l-1)):B.right===e.key?(e.preventDefault(),p(l+1)):B.home===e.key?(e.preventDefault(),p(0)):B.end===e.key&&(e.preventDefault(),p(j.length-1))},J=e=>{const t=e.clipboardData.getData("text/plain"),s=e.target,d=j.findIndex(({character:c,inputRef:R})=>c===""||R.current===s),l=S(),y=ve(l,be(t),d).map((c,R)=>W(c,R)?c:""),g=L(y);r==null||r(g);const{isCompleted:v,finalValue:T}=A(g);v?(o==null||o(T),p(u-1)):p(g.length)},U=e=>{if(!j.some(({inputRef:t})=>t.current===e.relatedTarget)){const{isCompleted:t,finalValue:s}=A(h);w==null||w(s,t)}};return n.jsx(O,{display:"flex",gap:"20px",alignItems:"center",ref:i,className:`MuiOtpInput-Box ${D||""}`,...I,children:j.map(({character:e,inputRef:t},s)=>{const{onPaste:d,onFocus:l,onKeyDown:y,className:g,onBlur:v,...T}=typeof m=="function"?m(s)||{}:m||{};return n.jsx(ge,{autoFocus:b?s===0:!1,autoComplete:"one-time-code",value:e,inputRef:t,className:`MuiOtpInput-TextField MuiOtpInput-TextField-${s+1} ${g||""}`,onPaste:c=>{c.preventDefault(),J(c),d==null||d(c)},onFocus:c=>{c.preventDefault(),c.target.select(),l==null||l(c)},onChange:K,onKeyDown:c=>{Q(c),y==null||y(c)},onBlur:c=>{v==null||v(c),U(c)},...T},s)})})}),Ae=({...a})=>{const i=Y(),h=Z(),u=_(),b=ee(r=>r.auth.email);return console.log("email",b),n.jsx("div",{children:n.jsx(de,{initialValues:{email:b,otp:""},validationSchema:ue().shape({email:N().email("Must be a valid email").max(255).required("Email is required"),otp:N().length(6,"OTP must be 6 digits").required("OTP is required")}),onSubmit:(r,{setSubmitting:m,setErrors:o})=>{h(te({email:r.email,otp:r.otp})).then(x=>{x.payload.success&&u("/dashboard/default"),m(!1)}).catch(x=>{o({submit:x.message}),m(!1)})},children:({errors:r,handleBlur:m,handleChange:o,handleSubmit:x,isSubmitting:D,touched:w,values:I})=>n.jsxs("form",{noValidate:!0,onSubmit:x,...a,children:[n.jsxs($,{fullWidth:!0,error:!!(w.email&&r.email),sx:{...i.typography.customInput},children:[n.jsx(pe,{htmlFor:"outlined-adornment-email-login",children:"Email Address"}),n.jsx(ne,{id:"outlined-adornment-email-login",type:"email",value:I.email,name:"email",onBlur:m,onChange:o,label:"Email Address ",inputProps:{}}),w.email&&r.email&&n.jsx(C,{error:!0,id:"standard-weight-helper-text-email-login",children:r.email})]}),n.jsxs($,{fullWidth:!0,error:!!(w.password&&r.password),sx:{...i.typography.customInput},children:[n.jsx(Fe,{name:"otp",autoFocus:!0,value:I.otp,onChange:k=>{o({target:{name:"otp",value:k}})},onBlur:m,length:6}),w.password&&r.password&&n.jsx(C,{error:!0,id:"standard-weight-helper-text-password-login",children:r.password})]}),r.submit&&n.jsx(O,{sx:{mt:3},children:n.jsx(C,{error:!0,children:r.submit})}),n.jsx(O,{sx:{mt:2},children:n.jsx(re,{children:n.jsx(he,{disableElevation:!0,disabled:D,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"secondary",children:"Sign in"})})})]})})})},Ce=()=>{const a=ae(i=>i.breakpoints.down("md"));return n.jsx(oe,{children:n.jsxs(f,{container:!0,direction:"column",justifyContent:"flex-end",sx:{minHeight:"100vh"},children:[n.jsx(f,{item:!0,xs:12,children:n.jsx(f,{container:!0,justifyContent:"center",alignItems:"center",sx:{minHeight:"calc(100vh - 68px)"},children:n.jsx(f,{item:!0,sx:{m:{xs:1,sm:3},mb:0},children:n.jsx(ce,{children:n.jsxs(f,{container:!0,spacing:2,alignItems:"center",justifyContent:"center",children:[n.jsx(f,{item:!0,sx:{mb:3},children:n.jsx(se,{to:"#","aria-label":"logo",children:n.jsx(ie,{})})}),n.jsx(f,{item:!0,xs:12,children:n.jsx(f,{container:!0,direction:{xs:"column-reverse",md:"row"},alignItems:"center",justifyContent:"center",children:n.jsx(f,{item:!0,children:n.jsxs(le,{alignItems:"center",justifyContent:"center",spacing:1,children:[n.jsx(H,{color:"secondary.main",gutterBottom:!0,variant:a?"h3":"h2",children:"Hi, Welcome Back"}),n.jsx(H,{variant:"caption",fontSize:"16px",textAlign:{xs:"center",md:"inherit"},children:"Enter your One Time Password"})]})})})}),n.jsx(f,{item:!0,xs:12,children:n.jsx(Ae,{})})]})})})})}),n.jsx(f,{item:!0,xs:12,sx:{m:3,mt:1}})]})})};export{Ce as default};
