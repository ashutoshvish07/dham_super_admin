import{r as s,v as y,a as A,u as B,X as i,j as o,B as c,S as _,F as T,P,Y as w,Z as M,_ as Y}from"./index-nP3sWgOM.js";import{G as k}from"./GetToAction-p5I7uB52.js";import{A as E}from"./Dialog-D7RuuEns.js";import{l as I}from"./lodash-CeyOGm4C.js";import{h as R}from"./moment-G82_0lEo.js";import{D as F}from"./DataTable-BAyMAVN6.js";import{B as G}from"./Button-DYMAArme.js";import"./InputLabel-DaDe49tm.js";import"./TextField-Btu36Zmo.js";import"./MenuItem-vSBr2iRT.js";import"./index-CcBqUUtn.js";import"./DialogContent-CAWl_w7U.js";import"./Autocomplete-Cb93hnIo.js";import"./Close-CYbAYMXT.js";import"./Checkbox-CVXqhyuK.js";import"./Skeleton-DY2pMhD5.js";import"./colorManipulator-BTVsESXO.js";import"./useThemeProps-Cp5GSgP0.js";const re=()=>{const[p,O]=s.useState(""),[u,U]=s.useState(null),[r,h]=s.useState({open:!1,onClose:()=>h({...r,open:!1})}),[l,g]=s.useState({page:0,pageSize:10}),[f,x]=s.useState(""),d=y(),a=A(),{blogs:n,loading:S,error:X}=B(e=>e.blogs);s.useEffect(()=>{a(i({page:1,page_size:10}))},[a]);const m=()=>{d("/create-blogs")},C=e=>{d(`/edit-blogs/${e}`)},z=e=>{a(M({id:e})).then(()=>{a(i({page:1,page_size:10}))})},b=(e,t)=>{a(Y({id:e,status:t})).then(()=>{a(i({page:1,page_size:10}))})},v=[{field:"title",headerName:"Title ",flex:2},{field:"tags",headerName:"Tags ",flex:2},{field:"cityId",headerName:"City ",flex:1,renderCell:e=>{var t;return(t=e==null?void 0:e.value)==null?void 0:t.name}},{field:"shortNote",headerName:"Short Note ",flex:3},{field:"status",headerName:"Status ",flex:1.2,renderCell:e=>o.jsx(w,{label:e==null?void 0:e.value,color:(e==null?void 0:e.value)==="published"?"secondary":"error"})},{field:"createdAt",headerName:"Created Date",flex:1,renderCell:e=>R(e.value).format("DD/MM/YYYY")},{field:"_id",headerName:"Action",flex:2,renderCell:e=>{var t;return console.log("params--->",e),k(e.value,C,z,b,(t=e==null?void 0:e.row)==null?void 0:t.status)}}],j=e=>{e.pageSize==l.pageSize?(a(i({page:e.page+1,page_size:e.pageSize})),g(e)):(a(i({page:e.page,page_size:e.pageSize})),g({page:1,pageSize:e.pageSize}))},D=s.useCallback(I.debounce(e=>{a(i({page:l.page+1,page_size:l==null?void 0:l.pageSize,search:e}))},1e3),[]),N=e=>{const t=e.target.value;x(t),D(t)};return o.jsxs("div",{children:[o.jsx(E,{title:p,content:u,dialogProps:r}),o.jsxs(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:2},children:[o.jsx(c,{children:o.jsx(_,{value:f,handleSearchChange:N})}),o.jsx(G,{sx:{borderRadius:2},variant:"outlined",color:"secondary",size:"large",onClick:m,startIcon:o.jsx(T,{size:14}),children:"Blogs"})]}),o.jsx(P,{children:o.jsx(F,{data:n.blogs,columns:v,getRowId:e=>e._id,loading:S,initialState:{pagination:{paginationModel:{pageSize:10}}},rowCount:(n==null?void 0:n.count)||0,paginationMode:"server",onPaginationModelChange:j,pageSizeOptions:[10],disableRowSelectionOnClick:!0})})]})};export{re as default};
