import{Q as ce,c as f,O as te,V as pe,a4 as me,a0 as ue,a7 as fe,a8 as I,a9 as xe,j as n,G as t,B as R,a5 as ge,W as ye,o as Ie,aa as he}from"./index-BAq3bRqY.js";import{u as Ce}from"./formik.esm-DtCjOOhE.js";import{c as be,a as u,b as se}from"./index.esm-Bt5w9dkV.js";import{I as je}from"./ImageUpload-Cc3qyREt.js";import{A as P}from"./AutoComplete-D00_KALi.js";import{T as y}from"./TextField-Cduosa0A.js";import{B as ae}from"./InputLabel-D1eMKdds.js";import{A as Se,D as qe,h as ze,G as Ae}from"./GetToAction-j5mJ1n0n.js";import"./SearchBar-D8y6vnIJ.js";import{l as we}from"./lodash-C1C24seO.js";import"./IconButton-CEOIaKrH.js";import"./Skeleton-COOXqLw1.js";import"./Checkbox-L0e4q_n7.js";const de=({type:h,dialogProps:x,hotle_data:i})=>{var F,j,S,q,z,A,w,T,o,c,B,H,M,N,W,E,V,k,G,L,O,Y,K,$,U,Q,J,X,Z,v;const l=ce(),[C,b]=f.useState([]),{countries:d,states:p,cities:g,loading:D}=te(r=>r.location);console.log("countries",d,i),f.useEffect(()=>{l(pe({page:1,page_size:10})),l(me()),l(ue({page:1,page_size:10}))},[]);const m=r=>{b(r)},a=r=>{b(C.filter(s=>s!==r))},e=Ce({initialValues:{name:(i==null?void 0:i.name)||"",email:(i==null?void 0:i.email)||"",mobile:(i==null?void 0:i.mobile)||"",password:(i==null?void 0:i.password)||"",countryId:((F=i==null?void 0:i.countryId)==null?void 0:F._id)||"",stateId:((j=i==null?void 0:i.stateId)==null?void 0:j._id)||"",cityId:((S=i==null?void 0:i.cityId)==null?void 0:S._id)||"",address:(i==null?void 0:i.address)||"",pincode:(i==null?void 0:i.pincode)||"",price:(i==null?void 0:i.price)||"",offerPrice:(i==null?void 0:i.offerPrice)||""},validationSchema:be({name:u().required("Required"),email:u().email("Invalid email").required("Required"),mobile:u().required("Required"),password:u(),countryId:u().required("Required"),stateId:u().required("Required"),cityId:u().required("Required"),address:u().required("Required"),pincode:u().required("Required"),price:se().required("Required"),offerPrice:se().required("Required")}),onSubmit:r=>{var _,ee,re,ie,ne,oe;const s=new FormData;s.append("name",r.name),s.append("email",r.email),s.append("mobile",r.mobile),s.append("password",r.password),s.append("address",r.address),s.append("pincode",r.pincode),s.append("price",r.price),s.append("offerPrice",r.offerPrice),s.append("countryId",(_=r==null?void 0:r.countryId)!=null&&_._id?(ee=r==null?void 0:r.countryId)==null?void 0:ee._id:r==null?void 0:r.countryId),s.append("stateId",(re=r==null?void 0:r.stateId)!=null&&re._id?(ie=r==null?void 0:r.stateId)==null?void 0:ie._id:r==null?void 0:r.stateId),s.append("cityId",(ne=r==null?void 0:r.cityId)!=null&&ne._id?(oe=r==null?void 0:r.cityId)==null?void 0:oe._id:r==null?void 0:r.cityId),C.length&&C.forEach((le,Te)=>{s.append("files[]",le)}),h==="edit"?(l(fe({formData:s,id:i==null?void 0:i._id})),l(I({page:1,page_size:10})),x==null||x.onClose()):(l(xe(s)),l(I({page:1,page_size:10})),x==null||x.onClose())}});return n.jsxs("form",{onSubmit:e.handleSubmit,children:[n.jsxs(t,{container:!0,spacing:2,children:[n.jsx(t,{item:!0,xs:12,sm:6,children:n.jsx(y,{color:"secondary",fullWidth:!0,id:"name",name:"name",label:"Hotel Name",value:(q=e.values)==null?void 0:q.name,onChange:e==null?void 0:e.handleChange,error:((z=e.touched)==null?void 0:z.name)&&!!((A=e.errors)!=null&&A.name),helperText:((w=e.touched)==null?void 0:w.name)&&((T=e.errors)==null?void 0:T.name)})}),n.jsx(t,{item:!0,xs:12,sm:6,children:n.jsx(y,{color:"secondary",fullWidth:!0,id:"email",name:"email",label:"Email",value:(o=e.values)==null?void 0:o.email,onChange:e.handleChange,error:((c=e.touched)==null?void 0:c.email)&&!!((B=e.errors)!=null&&B.email),helperText:((H=e.touched)==null?void 0:H.email)&&((M=e.errors)==null?void 0:M.email)})}),n.jsx(t,{item:!0,xs:12,sm:6,children:n.jsx(y,{fullWidth:!0,color:"secondary",id:"mobile",name:"mobile",label:"Mobile",inputProps:{maxLength:10,inputMode:"numeric",pattern:"[0-9]*"},value:e.values.mobile,onChange:r=>{const s=r.target.value.replace(/\D/g,"").slice(0,10);e.setFieldValue("mobile",s)},error:e.touched.mobile&&!!e.errors.mobile,helperText:e.touched.mobile&&e.errors.mobile})}),n.jsx(t,{item:!0,xs:12,sm:6,children:n.jsx(y,{fullWidth:!0,color:"secondary",id:"password",name:"password",label:"Password",type:"password",value:(N=e.values)==null?void 0:N.password,onChange:e.handleChange,error:((W=e.touched)==null?void 0:W.password)&&!!((E=e.errors)!=null&&E.password),helperText:((V=e.touched)==null?void 0:V.password)&&((k=e.errors)==null?void 0:k.password)})}),n.jsx(t,{item:!0,xs:12,sm:6,children:n.jsx(P,{options:(d==null?void 0:d.countries)||[],label:"Select Country",id:"country-select",name:"countryId",value:h==="edit"?(L=(G=d==null?void 0:d.countries)==null?void 0:G.find(r=>{var s;return r._id===((s=i==null?void 0:i.countryId)==null?void 0:s._id)}))==null?void 0:L.name:e.values.countryId,onChange:r=>{e.setFieldValue("countryId",r||"")},error:e.touched.countryId&&!!e.errors.countryId,helperText:e.touched.countryId&&e.errors.countryId,required:!0,optionKey:"_id",optionLabel:"name",color:"secondary"})}),n.jsx(t,{item:!0,xs:12,sm:6,children:n.jsx(P,{options:(p==null?void 0:p.states)||[],label:"Select State",id:"state-select",name:"stateId",value:h==="edit"?(Y=(O=p==null?void 0:p.states)==null?void 0:O.find(r=>{var s;return r._id===((s=i==null?void 0:i.stateId)==null?void 0:s._id)}))==null?void 0:Y.name:e.values.stateId,onChange:r=>{e.setFieldValue("stateId",r||"")},error:e.touched.stateId&&!!e.errors.stateId,helperText:e.touched.stateId&&e.errors.stateId,required:!0,optionKey:"_id",optionLabel:"name",color:"secondary"})}),n.jsx(t,{item:!0,xs:12,sm:6,children:n.jsx(P,{options:(g==null?void 0:g.cities)||[],label:"Select City",id:"city-select",name:"cityId",value:h==="edit"?($=(K=g==null?void 0:g.cities)==null?void 0:K.find(r=>{var s;return r._id===((s=i==null?void 0:i.cityId)==null?void 0:s._id)}))==null?void 0:$.name:e.values.cityId,onChange:r=>{e.setFieldValue("cityId",r||"")},error:e.touched.cityId&&!!e.errors.cityId,helperText:e.touched.cityId&&e.errors.cityId,required:!0,optionKey:"_id",optionLabel:"name",color:"secondary"})}),n.jsx(t,{item:!0,xs:12,sm:6,children:n.jsx(y,{color:"secondary",fullWidth:!0,id:"pincode",name:"pincode",label:"Pincode",value:(U=e.values)==null?void 0:U.pincode,onChange:e.handleChange,error:e.touched.pincode&&!!e.errors.pincode,helperText:e.touched.pincode&&e.errors.pincode})}),n.jsx(t,{item:!0,xs:12,sm:6,children:n.jsx(y,{color:"secondary",fullWidth:!0,id:"price",name:"price",label:"Price",value:(Q=e.values)==null?void 0:Q.price,onChange:e.handleChange,error:e.touched.price&&!!e.errors.price,helperText:e.touched.price&&e.errors.price})}),n.jsx(t,{item:!0,xs:12,sm:6,children:n.jsx(y,{color:"secondary",fullWidth:!0,id:"offerPrice",name:"offerPrice",label:"Offer Price",value:(J=e.values)==null?void 0:J.offerPrice,onChange:e.handleChange,error:e.touched.offerPrice&&!!e.errors.offerPrice,helperText:e.touched.offerPrice&&e.errors.offerPrice})}),n.jsx(t,{item:!0,xs:12,children:n.jsx(y,{color:"secondary",fullWidth:!0,id:"address",name:"address",label:"Address",value:(X=e.values)==null?void 0:X.address,onChange:e.handleChange,error:((Z=e.touched)==null?void 0:Z.address)&&!!((v=e.errors)!=null&&v.address),helperText:e.touched.address&&e.errors.address})}),n.jsx(t,{item:!0,xs:12,children:n.jsx(je,{files:C,setFiles:m,deleteFile:a})})]}),n.jsx(R,{sx:{display:"flex",justifyContent:"flex-end",marginTop:2},children:n.jsx(ae,{type:"submit",variant:"outlined",color:"secondary",size:"medium",children:"Submit"})})]})},Le=()=>{const[h,x]=f.useState(""),[i,l]=f.useState(""),[C,b]=f.useState(null),[d,p]=f.useState({open:!1,onClose:()=>p({...d,open:!1})}),[g,D]=f.useState({page:0,pageSize:10}),m=ce(),{hotels:a,loading:e,error:F}=te(o=>o.hotel);f.useEffect(()=>{m(I({page:1,page_size:10}))},[m]);const j=()=>{l("Add Hotle"),b(n.jsx(de,{dialogProps:d})),p({...d,open:!0})},S=o=>{const c=a==null?void 0:a.hotels.find(B=>B._id===o);l("Update Hotel"),b(n.jsx(de,{dialogProps:d,hotle_data:c,type:"edit"})),p({...d,open:!0})},q=o=>{m(he({id:o})).then(()=>{m(I({page:1,page_size:10}))})},z=[{field:"name",headerName:"Hotel name",flex:2},{field:"cityId",headerName:"City ",flex:1,renderCell:o=>{var c;return(c=o==null?void 0:o.value)==null?void 0:c.name}},{field:"stateId",headerName:"State ",flex:1,renderCell:o=>{var c;return(c=o==null?void 0:o.value)==null?void 0:c.name}},{field:"address",headerName:"Address",flex:2},{field:"email",headerName:"Email",flex:1},{field:"mobile",headerName:"Mobile",flex:1},{field:"status",headerName:"Status",flex:1},{field:"createdAt",headerName:"Added Date",flex:1,renderCell:o=>ze(o.value).format("DD/MM/YYYY")},{field:"_id",headerName:"Action",flex:1,renderCell:o=>Ae(o.value,S,q)}],A=o=>{o.pageSize==g.pageSize?(m(I({page:o.page+1,page_size:o.pageSize})),D(o)):(m(I({page:o.page,page_size:o.pageSize})),D({page:1,pageSize:o.pageSize}))},w=f.useCallback(we.debounce(o=>{m(I({page:1,page_size:10,search:o}))},1e3),[]),T=o=>{const c=o.target.value;x(c),w(c)};return n.jsxs(n.Fragment,{children:[n.jsx(Se,{title:i,content:C,dialogProps:d}),n.jsxs(R,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:2},children:[n.jsx(R,{children:n.jsx(ge,{value:h,handleSearchChange:T})}),n.jsx(ae,{sx:{borderRadius:2},variant:"outlined",color:"secondary",size:"large",onClick:j,startIcon:n.jsx(ye,{size:14}),children:"Hotles"})]}),n.jsx(Ie,{children:n.jsx(qe,{data:a==null?void 0:a.hotels,columns:z,getRowId:o=>o._id,loading:e,initialState:{pagination:{paginationModel:{pageSize:10}}},rowCount:a==null?void 0:a.count,paginationMode:"server",onPaginationModelChange:A,pageSizeOptions:[10],disableRowSelectionOnClick:!0})})]})};export{Le as default};
