import{u as j,a as C,r as c,h as M,k,l as m,m as I,j as t,G as x,n as w,B as A,F as E,P as G,o as N}from"./index-nP3sWgOM.js";import{A as P}from"./AutoComplete-OgZ3j4BA.js";import{u as R}from"./formik.esm-Dyqt8FN9.js";import{T as Y}from"./TextField-Btu36Zmo.js";import{B as z}from"./Button-DYMAArme.js";import{G as V}from"./GetToAction-p5I7uB52.js";import{A as q}from"./Dialog-D7RuuEns.js";import{h as O}from"./moment-G82_0lEo.js";import{D as W}from"./DataTable-BAyMAVN6.js";import"./Autocomplete-Cb93hnIo.js";import"./Close-CYbAYMXT.js";import"./InputLabel-DaDe49tm.js";import"./MenuItem-vSBr2iRT.js";import"./index-CcBqUUtn.js";import"./DialogContent-CAWl_w7U.js";import"./Checkbox-CVXqhyuK.js";import"./Skeleton-DY2pMhD5.js";import"./colorManipulator-BTVsESXO.js";import"./useThemeProps-Cp5GSgP0.js";const h=S=>{var i;const{dialogProps:r,statedata:n,type:g}=S,{countries:d,loading:s,error:u}=j(e=>e.location),l=C();c.useEffect(()=>{l(M({page:1,page_size:100}))},[]);const a=R({initialValues:{country:((i=n==null?void 0:n.countryId)==null?void 0:i.name)||"",state:(n==null?void 0:n.name)||""},onSubmit:e=>{var p,y;g==="edit"?l(k({state:e.state,countryId:(p=e.country)==null?void 0:p._id,stateId:n._id})).then(()=>{l(m({page:1,page_size:10})),r==null||r.onClose()}):l(I({state:e.state,countryId:(y=e.country)==null?void 0:y._id})).then(()=>{l(m({page:1,page_size:10})),r==null||r.onClose()})}});return t.jsx("div",{children:t.jsxs("form",{onSubmit:a.handleSubmit,children:[t.jsxs(x,{container:!0,spacing:2,children:[t.jsx(x,{item:!0,xs:12,children:t.jsx(w,{fullWidth:!0,children:t.jsx(P,{options:(d==null?void 0:d.countries)||[],label:"Select Country",id:"country-select",name:"country",value:a.values.country,onChange:e=>a.setFieldValue("country",e),error:a.touched.country&&!!a.errors.country,helperText:a.touched.country&&a.errors.country,required:!0,color:"secondary",optionKey:"_id",optionLabel:"name"})})}),t.jsx(x,{item:!0,xs:12,children:t.jsx(Y,{autoFocus:!0,margin:"dense",id:"name",label:"State Name",type:"text",fullWidth:!0,color:"secondary",variant:"outlined",value:a.values.state,onChange:e=>a.setFieldValue("state",e.target.value),required:!0})})]}),t.jsx(A,{sx:{display:"flex",justifyContent:"flex-end",marginTop:2},children:t.jsx(z,{type:"submit",variant:"outlined",color:"secondary",size:"medium",children:"Submit"})})]})})},ce=S=>{var f;const[r,n]=c.useState(""),[g,d]=c.useState(null),[s,u]=c.useState({open:!1,onClose:()=>u({...s,open:!1})}),[l,a]=c.useState({page:0,pageSize:10}),i=C(),{states:e,loading:p,error:y}=j(o=>o.location);c.useEffect(()=>{i(m({page:1,page_size:10}))},[i]);const _=()=>{n("Add State"),d(t.jsx(h,{dialogProps:s})),u({...s,open:!0})},b=o=>{const B=e==null?void 0:e.states.find(T=>T._id===o);n("Update State"),d(t.jsx(h,{dialogProps:s,statedata:B,type:"edit"})),u({...s,open:!0})},D=o=>{i(N({state_id:o})),i(m({page:1,page_size:10}))},F=[{field:"name",headerName:"State name",flex:2},{field:"createdAt",headerName:"Added Date",flex:2,renderCell:o=>O(o.value).format("DD/MM/YYYY")},{field:"_id",headerName:"Action",flex:2,renderCell:o=>V(o.value,b,D)}],v=o=>{o.pageSize==l.pageSize?(i(getCountryBySuperAdminAsync({page:o.page+1,page_size:o.pageSize})),a(o)):(i(getCountryBySuperAdminAsync({page:o.page,page_size:o.pageSize})),a({page:1,pageSize:o.pageSize}))};return t.jsxs(t.Fragment,{children:[t.jsx(q,{title:r,content:g,dialogProps:s}),t.jsx(A,{sx:{display:"flex",justifyContent:"flex-end",marginBottom:2},children:t.jsx(z,{sx:{borderRadius:2},variant:"outlined",color:"secondary",size:"large",onClick:_,startIcon:t.jsx(E,{size:14}),children:"State"})}),t.jsx(G,{children:t.jsx(W,{data:e==null?void 0:e.states,columns:F,getRowId:o=>o._id,loading:p,initialState:{pagination:{paginationModel:{pageSize:10}}},rowCount:(f=e==null?void 0:e.states)==null?void 0:f.length,paginationMode:"server",onPaginationModelChange:v,pageSizeOptions:[10],disableRowSelectionOnClick:!0})})]})};export{ce as default};
