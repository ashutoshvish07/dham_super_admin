import{r as s,v as z,u as N,a as v,aE as i,j as a,B as l,a3 as j,P as k}from"./index-nP3sWgOM.js";import{S as P}from"./SearchBar-BByW93zJ.js";import{h as m}from"./moment-G82_0lEo.js";import{l as y}from"./lodash-CeyOGm4C.js";import{D as M}from"./DataTable-BAyMAVN6.js";import"./TextField-Btu36Zmo.js";import"./InputLabel-DaDe49tm.js";import"./Autocomplete-Cb93hnIo.js";import"./Close-CYbAYMXT.js";import"./MenuItem-vSBr2iRT.js";import"./Checkbox-CVXqhyuK.js";import"./Button-DYMAArme.js";import"./Skeleton-DY2pMhD5.js";import"./colorManipulator-BTVsESXO.js";import"./useThemeProps-Cp5GSgP0.js";const G=()=>{const[p,c]=s.useState({open:!1,onClose:()=>c({...p,open:!1})}),[u,d]=s.useState({page:0,pageSize:10}),[g,h]=s.useState("");z();const{loading:f,bookings:o}=N(e=>e.bookings),r=v();s.useEffect(()=>{r(i({page:1,page_size:10}))},[r]);const x=e=>{e.pageSize==u.pageSize?(r(i({page:e.page+1,page_size:e.pageSize})),d(e)):(r(i({page:e.page,page_size:e.pageSize})),d({page:1,pageSize:e.pageSize}))},S=[{field:"customerFirstName",headerName:"Customer Name",renderCell:e=>{const{customerFirstName:t,customerLastName:n}=e.row;return`${t} ${n}`},flex:1},{field:"hotelId",headerName:"Hotel",renderCell:e=>e.value.name,flex:2},{field:"totalPrice",headerName:"Total amount",flex:1},{field:"paidAmount",headerName:"Paid Amount ",flex:1},{field:"_id",headerName:"Due Amount ",flex:1,renderCell:e=>{const{totalPrice:t,paidAmount:n}=e.row;return console.log(t),t-n}},{field:"bookingStatus",headerName:"Booking Status",flex:1},{field:"paymentStatus",headerName:"Payment Status",flex:1},{field:"checkInDate",headerName:"Check In Date",flex:2,renderCell:e=>m(e.value).format("DD/MM/YYYY , HH:mm")},{field:"checkOutDate",headerName:"Check Out Date",flex:2,renderCell:e=>m(e.value).format("DD/MM/YYYY, HH:mm")}],C=s.useCallback(y.debounce(e=>{r(i({page:1,page_size:10,search:e}))},1e3),[]),D=e=>{const t=e.target.value;h(t),C(t)};return a.jsxs("div",{children:[a.jsxs(l,{sx:{display:"flex",justifyContent:"space-between",flexDirection:"row-reverse",alignItems:"center",marginBottom:2},children:[a.jsx(l,{children:a.jsx(P,{value:g,onChange:D,placeholder:"Search...",size:"small",color:"secondary"})}),a.jsx(l,{sx:{borderRadius:2},children:a.jsx(j,{variant:"h2",color:"secondary",children:"Bookings Details"})})]}),a.jsx(k,{children:a.jsx(M,{data:o==null?void 0:o.bookings,columns:S,getRowId:e=>e._id,loading:f,initialState:{pagination:{paginationModel:{pageSize:10}}},rowCount:o==null?void 0:o.count,paginationMode:"server",onPaginationModelChange:x,pageSizeOptions:[10],disableRowSelectionOnClick:!0})})]})};export{G as default};
