import{a7 as C,a8 as y,a9 as T,aa as u,r as d,ab as j,ac as w,j as a,ad as R,ae as S,af as _,v as W,u as X,a as q,ag as v,B as $,F as J,P as K,ah as Q}from"./index-nP3sWgOM.js";import{d as V}from"./Visibility-B1xlqc8u.js";import{G as Z}from"./GetToAction-p5I7uB52.js";import{A as ee}from"./Dialog-D7RuuEns.js";import{S as oe}from"./SearchBar-BByW93zJ.js";import{h as N}from"./moment-G82_0lEo.js";import{l as te}from"./lodash-CeyOGm4C.js";import{T as ae,a as D,D as se,b as x}from"./DataTable-BAyMAVN6.js";import"./index.esm-B2q6Cw9c.js";import{B as re}from"./Button-DYMAArme.js";import{a as le}from"./InputLabel-DaDe49tm.js";import"./TextField-Btu36Zmo.js";import"./MenuItem-vSBr2iRT.js";import"./index-CcBqUUtn.js";import"./DialogContent-CAWl_w7U.js";import"./Autocomplete-Cb93hnIo.js";import"./Close-CYbAYMXT.js";import"./Checkbox-CVXqhyuK.js";import"./Skeleton-DY2pMhD5.js";import"./colorManipulator-BTVsESXO.js";import"./useThemeProps-Cp5GSgP0.js";function ne(e){return C("MuiTable",e)}y("MuiTable",["root","stickyHeader"]);const ie=["className","component","padding","size","stickyHeader"],ce=e=>{const{classes:t,stickyHeader:r}=e;return S({root:["root",r&&"stickyHeader"]},ne,t)},de=T("table",{name:"MuiTable",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.stickyHeader&&t.stickyHeader]}})(({theme:e,ownerState:t})=>u({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":u({},e.typography.body2,{padding:e.spacing(2),color:(e.vars||e).palette.text.secondary,textAlign:"left",captionSide:"bottom"})},t.stickyHeader&&{borderCollapse:"separate"})),k="table",pe=d.forwardRef(function(t,r){const s=j({props:t,name:"MuiTable"}),{className:c,component:l=k,padding:i="normal",size:n="medium",stickyHeader:p=!1}=s,g=w(s,ie),b=u({},s,{component:l,padding:i,size:n,stickyHeader:p}),m=ce(b),M=d.useMemo(()=>({padding:i,size:n,stickyHeader:p}),[i,n,p]);return a.jsx(ae.Provider,{value:M,children:a.jsx(de,u({as:l,role:l===k?null:"table",ref:r,className:R(m.root,c),ownerState:b},g))})});function ue(e){return C("MuiTableBody",e)}y("MuiTableBody",["root"]);const me=["className","component"],fe=e=>{const{classes:t}=e;return S({root:["root"]},ue,t)},ge=T("tbody",{name:"MuiTableBody",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"table-row-group"}),be={variant:"body"},H="tbody",he=d.forwardRef(function(t,r){const s=j({props:t,name:"MuiTableBody"}),{className:c,component:l=H}=s,i=w(s,me),n=u({},s,{component:l}),p=fe(n);return a.jsx(D.Provider,{value:be,children:a.jsx(ge,u({className:R(p.root,c),as:l,ref:r,role:l===H?null:"rowgroup",ownerState:n},i))})});function ve(e){return C("MuiTableContainer",e)}y("MuiTableContainer",["root"]);const xe=["className","component"],Ce=e=>{const{classes:t}=e;return S({root:["root"]},ve,t)},ye=T("div",{name:"MuiTableContainer",slot:"Root",overridesResolver:(e,t)=>t.root})({width:"100%",overflowX:"auto"}),Te=d.forwardRef(function(t,r){const s=j({props:t,name:"MuiTableContainer"}),{className:c,component:l="div"}=s,i=w(s,xe),n=u({},s,{component:l}),p=Ce(n);return a.jsx(ye,u({ref:r,as:l,className:R(p.root,c),ownerState:n},i))});function je(e){return C("MuiTableHead",e)}y("MuiTableHead",["root"]);const we=["className","component"],Re=e=>{const{classes:t}=e;return S({root:["root"]},je,t)},Se=T("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"table-header-group"}),Me={variant:"head"},B="thead",Ne=d.forwardRef(function(t,r){const s=j({props:t,name:"MuiTableHead"}),{className:c,component:l=B}=s,i=w(s,we),n=u({},s,{component:l}),p=Re(n);return a.jsx(D.Provider,{value:Me,children:a.jsx(Se,u({as:l,className:R(p.root,c),ref:r,role:l===B?null:"rowgroup",ownerState:n},i))})});function ze(e){return C("MuiTableRow",e)}const P=y("MuiTableRow",["root","selected","hover","head","footer"]),De=["className","component","hover","selected"],_e=e=>{const{classes:t,selected:r,hover:s,head:c,footer:l}=e;return S({root:["root",r&&"selected",s&&"hover",c&&"head",l&&"footer"]},ze,t)},$e=T("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.head&&t.head,r.footer&&t.footer]}})(({theme:e})=>({color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${P.hover}:hover`]:{backgroundColor:(e.vars||e).palette.action.hover},[`&.${P.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:_(e.palette.primary.main,e.palette.action.selectedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:_(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity)}}})),U="tr",z=d.forwardRef(function(t,r){const s=j({props:t,name:"MuiTableRow"}),{className:c,component:l=U,hover:i=!1,selected:n=!1}=s,p=w(s,De),g=d.useContext(D),b=u({},s,{component:l,hover:i,selected:n,head:g&&g.variant==="head",footer:g&&g.variant==="footer"}),m=_e(b);return a.jsx($e,u({as:l,ref:r,className:R(m.root,c),role:l===U?null:"row",ownerState:b},p))}),to=()=>{const[e,t]=d.useState(""),[r,s]=d.useState(null),[c,l]=d.useState({open:!1,onClose:()=>l({...c,open:!1})}),[i,n]=d.useState({page:0,pageSize:10}),[p,g]=d.useState(""),b=W(),{eventTour:m,loading:M,status:ke,error:He}=X(o=>o==null?void 0:o.eventTour);console.log("event",m);const h=q();d.useEffect(()=>{h(v({page:1,page_size:10}))},[h]);const A=()=>{b("/event-tours/create")},Y=o=>{b(`/event-tours/edit/${o}`)},E=o=>{o.pageSize==i.pageSize?(h(v({page:o.page+1,page_size:o.pageSize})),n(o)):(h(v({page:o.page,page_size:o.pageSize})),n({page:1,pageSize:o.pageSize}))},O=o=>{h(Q({id:o})).then(()=>{h(v({page:i.page,page_size:i.pageSize}))})},I=o=>{t("Preview"),s(a.jsx(Te,{children:a.jsxs(pe,{size:"small",children:[a.jsx(Ne,{children:a.jsxs(z,{children:[a.jsx(x,{children:"Package"}),a.jsx(x,{children:"Cost"})]})}),a.jsx(he,{children:o&&o.length>0?o.map(f=>a.jsxs(z,{children:[a.jsx(x,{children:f.package}),a.jsx(x,{children:f.cost})]},f._id)):a.jsx(z,{children:a.jsx(x,{colSpan:2,align:"center",children:"No data"})})})]})})),l({...c,open:!0})},F=[{field:"title",headerName:"Title",flex:1},{field:"cityId",headerName:"City ",flex:1,renderCell:o=>{var f;return(f=o==null?void 0:o.value)==null?void 0:f.name}},{field:"description",headerName:"Description",flex:2},{field:"type",headerName:"Type",flex:1},{field:"packageCost",headerName:"Cost",flex:1,renderCell:o=>a.jsx(le,{onClick:()=>{I(o==null?void 0:o.value)},children:a.jsx(V,{})})},{field:"duration",headerName:"Duration",flex:1},{field:"departure_from",headerName:"Departure From",flex:1},{field:"departure_time",headerName:"Departure Time",flex:1,renderCell:o=>N(o.value,"HH:mm").format("hh:mm A")},{field:"departure_date",headerName:"Departure Date",flex:1,renderCell:o=>N(o.value).format("DD/MM/YYYY")},{field:"createdAt",headerName:"Added Date",flex:1,renderCell:o=>N(o.value).format("DD/MM/YYYY")},{field:"_id",headerName:"Action",flex:1,renderCell:o=>Z(o.value,Y,O)}],G=d.useCallback(te.debounce(o=>{h(v({page:1,page_size:10,search:o}))},1e3),[]),L=o=>{const f=o.target.value;g(f),G(f)};return a.jsxs("div",{children:[a.jsx(ee,{title:e,content:r,dialogProps:c}),a.jsxs($,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:2},children:[a.jsx($,{children:a.jsx(oe,{value:p,onChange:L,placeholder:"Search...",size:"small",color:"secondary"})}),a.jsx(re,{sx:{borderRadius:2},variant:"outlined",color:"secondary",size:"large",onClick:A,startIcon:a.jsx(J,{size:14}),children:"Event & Tours"})]}),a.jsx(K,{children:a.jsx(se,{data:m==null?void 0:m.allEventsTours,columns:F,getRowId:o=>o._id,loading:M,initialState:{pagination:{paginationModel:{pageSize:10}}},rowCount:m==null?void 0:m.count,paginationMode:"server",onPaginationModelChange:E,pageSizeOptions:[10],disableRowSelectionOnClick:!0})})]})};export{to as default};
