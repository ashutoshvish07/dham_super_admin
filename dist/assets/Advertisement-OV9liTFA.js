import{r as o,a as A,v as Y,u as b,W as s,j as t,B as c,S as B,F as M,P as T,x as _}from"./index-nP3sWgOM.js";import"./AdvertisementForm-D-J2Ar4S.js";import"./index.esm-B2q6Cw9c.js";import{G as y}from"./GetToAction-p5I7uB52.js";import{A as w}from"./Dialog-D7RuuEns.js";import{l as E}from"./lodash-CeyOGm4C.js";import{h as g}from"./moment-G82_0lEo.js";import{D as I}from"./DataTable-BAyMAVN6.js";import{B as O}from"./Button-DYMAArme.js";import"./formik.esm-Dyqt8FN9.js";import"./AutoComplete-OgZ3j4BA.js";import"./Autocomplete-Cb93hnIo.js";import"./TextField-Btu36Zmo.js";import"./InputLabel-DaDe49tm.js";import"./Close-CYbAYMXT.js";import"./ImageUpload-B33Abahr.js";import"./index-CcBqUUtn.js";import"./useThemeProps-Cp5GSgP0.js";import"./colorManipulator-BTVsESXO.js";import"./DialogContent-CAWl_w7U.js";import"./index-BYu15YCe.js";import"./MenuItem-vSBr2iRT.js";import"./Checkbox-CVXqhyuK.js";import"./Skeleton-DY2pMhD5.js";const ce=()=>{const[m,k]=o.useState(""),[u,F]=o.useState(null),[f,h]=o.useState(""),a=A(),l=Y(),{advertisements:i,loading:x,error:R}=b(e=>e.advertisement),[d,S]=o.useState({open:!1,onClose:()=>S({...d,open:!1})}),[r,p]=o.useState({page:0,pageSize:10});o.useEffect(()=>{a(s({page:1,page_size:10}))},[a]);const v=()=>{l("/advertisement/create")},C=e=>{l(`/advertisement/update/${e}`)},z=e=>{a(_({id:e})).then(()=>{a(s({page:1,page_size:10}))})},D=[{field:"title",headerName:"Title",flex:1},{field:"description",headerName:"Description ",flex:2},{field:"offerOnItem",headerName:"Offer On Item",flex:1},{field:"discountPercentage",headerName:"Discount Percentage",flex:1,renderCell:e=>`${e==null?void 0:e.value}%`},{field:"createdBy",headerName:"Created By",flex:1,renderCell:e=>{var n;return`${(n=e==null?void 0:e.value)==null?void 0:n.name}`}},{field:"validFrom",headerName:"Start Date",flex:1,renderCell:e=>g(e.value).format("DD/MM/YYYY")},{field:"validUpto",headerName:"End Date",flex:1,renderCell:e=>g(e.value).format("DD/MM/YYYY")},{field:"_id",headerName:"Action",flex:1,renderCell:e=>y(e.value,C,z)}],j=e=>{e.pageSize==r.pageSize?(a(s({page:e.page+1,page_size:e.pageSize})),p(e)):(a(s({page:e.page,page_size:e.pageSize})),p({page:1,pageSize:e.pageSize}))},N=o.useCallback(E.debounce(e=>{a(s({page:r.page+1,page_size:r==null?void 0:r.pageSize,search:e}))},1e3),[]),P=e=>{const n=e.target.value;h(n),N(n)};return t.jsxs(t.Fragment,{children:[t.jsx(w,{title:m,content:u,dialogProps:d}),t.jsxs(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:2},children:[t.jsx(c,{children:t.jsx(B,{value:f,handleSearchChange:P})}),t.jsx(O,{sx:{borderRadius:2},variant:"outlined",color:"secondary",size:"large",onClick:v,startIcon:t.jsx(M,{size:14}),children:"Advertisement"})]}),t.jsx(T,{children:t.jsx(I,{data:i==null?void 0:i.advertisements,columns:D,getRowId:e=>e._id,loading:x,initialState:{pagination:{paginationModel:{pageSize:10}}},rowCount:i==null?void 0:i.count,paginationMode:"server",onPaginationModelChange:j,pageSizeOptions:[10],disableRowSelectionOnClick:!0})})]})};export{ce as default};
