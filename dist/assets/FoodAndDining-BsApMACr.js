import{a as z,ai as w,aj as l,ak as B,j as a,B as f,G as x,r,u as M,S as N,F as R,P as E,al as G}from"./index-nP3sWgOM.js";import{G as Y}from"./GetToAction-p5I7uB52.js";import{A as I}from"./Dialog-D7RuuEns.js";import{u as q}from"./formik.esm-Dyqt8FN9.js";import{c as O,a as $}from"./index.esm-B2q6Cw9c.js";import{T as U}from"./TextField-Btu36Zmo.js";import{B as D}from"./Button-DYMAArme.js";import{l as V}from"./lodash-CeyOGm4C.js";import{h as W}from"./moment-G82_0lEo.js";import{D as H}from"./DataTable-BAyMAVN6.js";import"./InputLabel-DaDe49tm.js";import"./MenuItem-vSBr2iRT.js";import"./index-CcBqUUtn.js";import"./DialogContent-CAWl_w7U.js";import"./Autocomplete-Cb93hnIo.js";import"./Close-CYbAYMXT.js";import"./Checkbox-CVXqhyuK.js";import"./Skeleton-DY2pMhD5.js";import"./colorManipulator-BTVsESXO.js";import"./useThemeProps-Cp5GSgP0.js";const j=h=>{const{dialogProps:p,data:n,edit:m}=h,o=z(),d=O({name:$().required("Required")}),t=q({initialValues:{name:(n==null?void 0:n.name)||""},validationSchema:d,onSubmit:g=>{const c=new FormData;c.append("name",g.name),m?o(w({formData:c,id:n==null?void 0:n._id})).then(()=>{o(l({page:1,page_size:10}))}):o(B(c)).then(()=>{o(l({page:1,page_size:10}))}),p.onClose()}});return a.jsx("div",{children:a.jsx(f,{component:"form",onSubmit:t.handleSubmit,sx:{mt:3},children:a.jsxs(x,{container:!0,spacing:2,children:[a.jsx(x,{item:!0,xs:12,sm:12,children:a.jsx(U,{fullWidth:!0,id:"name",name:"name",label:"Name",color:"secondary",value:t.values.name,onChange:t.handleChange,error:t.touched.name&&!!t.errors.name,helperText:t.touched.name&&t.errors.name})}),a.jsx(x,{item:!0,xs:12,sx:{display:"flex",justifyContent:"flex-end",marginTop:2},children:a.jsx(D,{color:"secondary",variant:"outlined",type:"submit",children:"Submit"})})]})})})},he=()=>{var S;const[h,p]=r.useState(""),[n,m]=r.useState(null),[o,d]=r.useState({open:!1,onClose:()=>d({...o,open:!1})}),[t,g]=r.useState({page:0,pageSize:10}),[c,C]=r.useState(""),i=z(),{foodAndDining:s,loading:A,error:J}=M(e=>e.hotel);r.useEffect(()=>{i(l({page:1,page_size:10}))},[i]);const F=()=>{p("Add Food and Dining"),m(a.jsx(j,{dialogProps:o})),d({...o,open:!0})},b=e=>{const u=s==null?void 0:s.data.find(k=>k._id===e);p("Update Food and Dining"),m(a.jsx(j,{dialogProps:o,data:u,type:"edit"})),d({...o,open:!0})},v=e=>{i(G({id:e})).then(()=>{i(l({page:1,page_size:10}))})},y=[{field:"name",headerName:"Name ",flex:3},{field:"createdAt",headerName:"Added Date",flex:2,renderCell:e=>W(e.value).format("DD/MM/YYYY")},{field:"_id",headerName:"Action",flex:2,renderCell:e=>Y(e.value,b,v)}],_=e=>{e.pageSize==t.pageSize?(i(l({page:e.page+1,page_size:e.pageSize})),g(e)):(i(l({page:e.page,page_size:e.pageSize})),g({page:1,pageSize:e.pageSize}))},T=r.useCallback(V.debounce(e=>{i(l({page:t.page+1,page_size:t==null?void 0:t.pageSize,search:e}))},1e3),[]),P=e=>{const u=e.target.value;C(u),T(u)};return a.jsxs("div",{children:[a.jsx(I,{title:h,content:n,dialogProps:o}),a.jsxs(f,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:2},children:[a.jsx(f,{children:a.jsx(N,{value:c,handleSearchChange:P})}),a.jsx(D,{sx:{borderRadius:2},variant:"outlined",color:"secondary",size:"large",onClick:F,startIcon:a.jsx(R,{size:14}),children:"Food and Dinings"})]}),a.jsx(E,{children:a.jsx(H,{data:s.data,columns:y,getRowId:e=>e._id,loading:A,initialState:{pagination:{paginationModel:{pageSize:10}}},rowCount:(S=s==null?void 0:s.data)==null?void 0:S.length,paginationMode:"server",onPaginationModelChange:_,pageSizeOptions:[10],disableRowSelectionOnClick:!0})})]})};export{he as default};
