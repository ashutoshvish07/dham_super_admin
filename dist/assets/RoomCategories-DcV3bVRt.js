import{Q as z,ab as w,ac as d,ad as M,j as a,G as S,B as x,c as l,O as v,a5 as E,W as F,o as G,ae as N}from"./index-BBlBa7Qk.js";import{u as Y}from"./formik.esm-iq-b8xKy.js";import{c as I,a as O}from"./index.esm-CIT1Jkon.js";import{T as q}from"./TextField-CILEcrSZ.js";import{B as y}from"./InputLabel-BvzpAYWJ.js";import{A as W,D as $,h as H,G as Q}from"./GetToAction-DPWmTIJ3.js";import{l as U}from"./lodash-B-mYtyDl.js";import"./IconButton-D_eKau7j.js";import"./Skeleton-IcUOLArC.js";import"./Checkbox-CM1tfGSp.js";const j=({dialogProps:g,catdata:t,type:u})=>{const i=z(),o=Y({initialValues:{name:(t==null?void 0:t.name)||""},validationSchema:I({name:O().required("name is required")}),onSubmit:s=>{u==="edit"?i(w({id:t==null?void 0:t._id,name:s==null?void 0:s.name})).then(()=>{i(d({page:1,page_size:10}))}):i(M({name:s==null?void 0:s.name})).then(()=>{i(d({page:1,page_size:10}))}),g.onClose()}});return a.jsx("div",{children:a.jsxs("form",{onSubmit:o.handleSubmit,children:[a.jsx(S,{container:!0,spacing:2,children:a.jsx(S,{item:!0,xs:12,children:a.jsx(q,{fullWidth:!0,id:"name",name:"name",label:"Category Name",color:"secondary",value:o.values.name,onChange:o.handleChange,error:o.touched.name&&!!o.errors.name,helperText:o.touched.name&&o.errors.name})})}),a.jsx(x,{sx:{display:"flex",justifyContent:"flex-end",marginTop:2},children:a.jsx(y,{type:"submit",variant:"outlined",color:"secondary",size:"medium",children:"Submit"})})]})})},se=()=>{var C;const[g,t]=l.useState(""),[u,i]=l.useState(null),[o,s]=l.useState(""),r=z(),{roomCategories:n,loading:b,error:V}=v(e=>e.hotel),[c,h]=l.useState({open:!1,onClose:()=>h({...c,open:!1})}),[p,f]=l.useState({page:0,pageSize:10});l.useEffect(()=>{r(d({page:1,page_size:10}))},[r]);const R=()=>{t("Add RoomCategory"),i(a.jsx(j,{dialogProps:c})),h({...c,open:!0})},_=e=>{const m=n==null?void 0:n.categories.find(P=>P._id===e);t("Update RoomCategory"),i(a.jsx(j,{dialogProps:c,catdata:m,type:"edit"})),h({...c,open:!0})},A=e=>{r(N({id:e})).then(()=>{r(d({page:1,page_size:10}))})},D=[{field:"name",headerName:"Categorie ",flex:2},{field:"createdAt",headerName:"Added Date",flex:2,renderCell:e=>H(e.value).format("DD/MM/YYYY")},{field:"_id",headerName:"Action",flex:2,renderCell:e=>Q(e.value,_,A)}],T=e=>{e.pageSize==p.pageSize?(r(d({page:e.page+1,page_size:e.pageSize})),f(e)):(r(d({page:e.page,page_size:e.pageSize})),f({page:1,pageSize:e.pageSize}))},k=l.useCallback(U.debounce(e=>{r(d({page:p.page+1,page_size:p==null?void 0:p.pageSize,search:e}))},1e3),[]),B=e=>{const m=e.target.value;s(m),k(m)};return a.jsxs("div",{children:[a.jsx(W,{title:g,content:u,dialogProps:c}),a.jsxs(x,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:2},children:[a.jsx(x,{children:a.jsx(E,{value:o,handleSearchChange:B})}),a.jsx(y,{sx:{borderRadius:2},variant:"outlined",color:"secondary",size:"large",onClick:R,startIcon:a.jsx(F,{size:14}),children:"RoomCategory"})]}),a.jsx(G,{children:a.jsx($,{data:n==null?void 0:n.categories,columns:D,getRowId:e=>e._id,loading:b,initialState:{pagination:{paginationModel:{pageSize:10}}},rowCount:(C=n==null?void 0:n.categories)==null?void 0:C.length,paginationMode:"server",onPaginationModelChange:T,pageSizeOptions:[10],disableRowSelectionOnClick:!0})})]})};export{se as default};
